import{c as b,y as h,a6 as g,x as k}from"./index-PFvgZIwd.js";import _ from"./popupForm-glKwcnI9.js";import{b as x,d as y,T as R,a as C}from"./index-B3GXhXFg.js";import{e as I,p,ar as T,x as v,m as w,o as f,h as A,s as l,N as E,V as N,l as n}from"./vue-CwFJaX1P.js";import"./index-CkJ5YQgv.js";import"./validate-BsCjhJOi.js";import"./index-JTTiPgQY.js";function q(){return b({url:"/admin/user.Rule/index",method:"get"})}const F={class:"default-main ba-table-box"},U=I({name:"user/group",__name:"index",setup(G){const{t}=h.useI18n(),u=p(),i=p(),e=new x(new g("/admin/user.Group/"),{column:[{type:"selection",align:"center",operator:!1},{label:t("Id"),prop:"id",align:"center",operator:"=",operatorPlaceholder:t("Id"),width:70},{label:t("user.group.Group name"),prop:"name",align:"center",operator:"LIKE",operatorPlaceholder:t("Fuzzy query")},{label:t("State"),prop:"status",align:"center",render:"tag",custom:{0:"danger",1:"success"},replaceValue:{0:t("Disable"),1:t("Enable")}},{label:t("Update time"),prop:"update_time",align:"center",render:"datetime",sortable:"custom",operator:"RANGE",width:160},{label:t("Create time"),prop:"create_time",align:"center",render:"datetime",sortable:"custom",operator:"RANGE",width:160},{label:t("Operate"),align:"center",width:"130",render:"buttons",buttons:y(["edit","delete"]),operator:!1}],dblClickNotEditColumn:[void 0]},{defaultItems:{status:"1"}},{onSubmit:({formEl:r,operate:a,items:o})=>{let m=()=>{e.form.submitLoading=!0,e.api.postData(a,{...o,rules:i.value.getCheckeds()}).then(s=>{var c;e.onTableHeaderAction("refresh",{}),e.form.submitLoading=!1,(c=e.form.operateIds)==null||c.shift(),e.form.operateIds.length>0?e.toggleForm("Edit",e.form.operateIds):e.toggleForm(),e.runAfter("onSubmit",{res:s})}).catch(()=>{e.form.submitLoading=!1})};return r?(e.form.ref=r,r.validate(s=>{s&&m()})):m(),!1}},{toggleForm({operate:r}){r=="Add"&&d()},requestEdit(){d()}}),d=()=>{q().then(r=>{if(e.form.extend.menuRules=r.data.list,e.form.items.rules&&e.form.items.rules.length)if(e.form.items.rules.includes("*")){let a=[];for(const o in e.form.extend.menuRules)a.push(e.form.extend.menuRules[o].id);e.form.extend.defaultCheckedKeys=a}else e.form.extend.defaultCheckedKeys=e.form.items.rules;else e.form.extend.defaultCheckedKeys=[];e.form.extend.treeKey=k()})};return T("baTable",e),v(()=>{e.table.ref=u.value,e.mount(),e.getIndex()}),(r,a)=>{const o=w("el-alert");return f(),A("div",F,[l(e).table.remark?(f(),E(o,{key:0,class:"ba-table-alert",title:l(e).table.remark,type:"info","show-icon":""},null,8,["title"])):N("",!0),n(R,{buttons:["refresh","add","edit","delete","comSearch","quickSearch","columnDisplay"],"quick-search-placeholder":l(t)("Quick search placeholder",{fields:l(t)("user.group.GroupName")})},null,8,["quick-search-placeholder"]),n(C,{ref_key:"tableRef",ref:u},null,512),n(_,{ref_key:"formRef",ref:i},null,512)])}}});export{U as default};
