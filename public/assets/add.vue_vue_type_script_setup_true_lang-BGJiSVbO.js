import{e as Me,a as q,o as d,h as Pe,N as m,s as u,V as g,a6 as S,a5 as O,p as _e,m as P,W as R,O as V,Z as Ee,U as W,T as j,k as De,j as Ie,l as b}from"./vue-CwFJaX1P.js";import{F as f}from"./index-CkJ5YQgv.js";import{c as Ue,b as h}from"./validate-BsCjhJOi.js";import{c as N,j as Ae,e as Se,y as qe}from"./index-PFvgZIwd.js";import{i as _}from"./index-B3GXhXFg.js";const T="/admin/routine.Config/",K=new Map([["index",T+"index"],["add",T+"add"],["edit",T+"edit"],["del",T+"del"],["sendTestMail",T+"sendTestMail"]]);function Fe(){return N({url:K.get("index"),method:"get"})}function Ne(c,y){return N({url:K.get(c),method:"post",data:y},{showSuccessMessage:!0})}function Le(c){return N({url:K.get("del"),method:"DELETE",params:{ids:c}},{showSuccessMessage:!0})}function $e(c,y){return N({url:K.get("sendTestMail"),method:"POST",data:Object.assign({},c,{testMail:y})},{showSuccessMessage:!0})}const Ke=Me({__name:"createData",props:{dataTitle:{default:Ae.global.t("utils.Var")},modelValue:{default:()=>({name:"",title:"",type:"",tip:"",rule:[],extend:"",dict:"",inputExtend:""})},options:{},excludeInputTypes:{default:()=>[]},excludeValidatorRule:{default:()=>[]}},emits:["update:modelValue"],setup(c,{emit:y}){var k,v,s,E,D,C,I,U,A,M,r,F,L,$,G,Z,H,J,Q,X,Y,ee,te,le,ae,oe,ie,ne,ue,se,de,re;const{t:o}=Ae.global,t=c,x=["radio","checkbox","select","selects"],e=q({name:{show:((v=(k=t.options)==null?void 0:k.name)==null?void 0:v.show)!==!1,value:t.modelValue.name,title:((E=(s=t.options)==null?void 0:s.name)==null?void 0:E.title)??t.dataTitle+o("utils.Name")},title:{show:((C=(D=t.options)==null?void 0:D.title)==null?void 0:C.show)!==!1,value:t.modelValue.title,title:((U=(I=t.options)==null?void 0:I.title)==null?void 0:U.title)??t.dataTitle+o("utils.Title")},type:{show:((M=(A=t.options)==null?void 0:A.type)==null?void 0:M.show)!==!1,value:t.modelValue.type,title:((F=(r=t.options)==null?void 0:r.type)==null?void 0:F.title)??t.dataTitle+o("utils.type")},tip:{show:(($=(L=t.options)==null?void 0:L.tip)==null?void 0:$.show)!==!1,value:t.modelValue.tip,title:((Z=(G=t.options)==null?void 0:G.tip)==null?void 0:Z.title)??o("utils.Tip")},rule:{show:((J=(H=t.options)==null?void 0:H.rule)==null?void 0:J.show)!==!1,value:t.modelValue.rule,title:((X=(Q=t.options)==null?void 0:Q.rule)==null?void 0:X.title)??o("utils.Rule")},extend:{show:((ee=(Y=t.options)==null?void 0:Y.extend)==null?void 0:ee.show)!==!1,value:t.modelValue.extend,title:((le=(te=t.options)==null?void 0:te.extend)==null?void 0:le.title)??"FormItem "+o("utils.Extend")},dict:{show:((oe=(ae=t.options)==null?void 0:ae.dict)==null?void 0:oe.show)!==!1,value:t.modelValue.dict,title:((ne=(ie=t.options)==null?void 0:ie.dict)==null?void 0:ne.title)??o("utils.Dict")},inputExtend:{show:((se=(ue=t.options)==null?void 0:ue.inputExtend)==null?void 0:se.show)!==!1,value:t.modelValue.inputExtend,title:((re=(de=t.options)==null?void 0:de.inputExtend)==null?void 0:re.title)??"Input "+o("utils.Extend")}}),i=q({validators:{},inputTypes:{}}),w=y,l=()=>{w("update:modelValue",{name:e.name.value??"",title:e.title.value??"",type:e.type.value??"",tip:e.tip.value??"",rule:e.rule.value??[],extend:e.extend.value??"",dict:x.includes(e.type.value??"")?e.dict.value??"":"",inputExtend:e.inputExtend.value??""})};return(()=>{let B={};for(const p in _)t.excludeInputTypes.includes(_[p])||(B[_[p]]=_[p]);i.inputTypes=B;let a={};for(const p in Ue)t.excludeValidatorRule.includes(p)||(a[p]=Ue[p]);i.validators=a,l()})(),(B,a)=>{var p,pe,me,fe,ce,ge,ye,Ve,ve,be,he,xe,we,ke,Ce,Te;return d(),Pe("div",null,[e.name.show?(d(),m(f,{key:0,label:e.name.title,type:"string",modelValue:e.name.value,"onUpdate:modelValue":a[0]||(a[0]=n=>e.name.value=n),placeholder:u(o)("Please input field",{field:e.name.title}),"input-attr":{onChange:l,...(pe=(p=t.options)==null?void 0:p.name)==null?void 0:pe.inputAttr},prop:"name"},null,8,["label","modelValue","placeholder","input-attr"])):g("",!0),e.title.show?(d(),m(f,{key:1,label:e.title.title,type:"string",modelValue:e.title.value,"onUpdate:modelValue":a[1]||(a[1]=n=>e.title.value=n),placeholder:u(o)("Please input field",{field:e.title.title}),"input-attr":{onChange:l,...(fe=(me=t.options)==null?void 0:me.title)==null?void 0:fe.inputAttr},prop:"title"},null,8,["label","modelValue","placeholder","input-attr"])):g("",!0),e.type.show?(d(),m(f,{key:2,label:e.type.title,type:"select",modelValue:e.type.value,"onUpdate:modelValue":a[2]||(a[2]=n=>e.type.value=n),placeholder:u(o)("Please select field",{field:e.type.title}),"input-attr":{onChange:l,content:i.inputTypes,...(ge=(ce=t.options)==null?void 0:ce.type)==null?void 0:ge.inputAttr},prop:"type"},null,8,["label","modelValue","placeholder","input-attr"])):g("",!0),e.dict.show&&x.includes(e.type.value)?(d(),m(f,{key:3,label:e.dict.title,type:"textarea",modelValue:e.dict.value,"onUpdate:modelValue":a[3]||(a[3]=n=>e.dict.value=n),"input-attr":{rows:3,placeholder:u(o)("utils.One line at a time, without quotation marks, for example: key1=value1"),onChange:l,...(Ve=(ye=t.options)==null?void 0:ye.dict)==null?void 0:Ve.inputAttr},prop:"dict",onKeyup:a[4]||(a[4]=S(O(()=>{},["stop"]),["enter"]))},null,8,["label","modelValue","input-attr"])):g("",!0),e.tip.show?(d(),m(f,{key:4,label:e.tip.title,type:"string",modelValue:e.tip.value,"onUpdate:modelValue":a[5]||(a[5]=n=>e.tip.value=n),placeholder:u(o)("Please input field",{field:e.tip.title}),"input-attr":{onChange:l,...(be=(ve=t.options)==null?void 0:ve.tip)==null?void 0:be.inputAttr},prop:"tip"},null,8,["label","modelValue","placeholder","input-attr"])):g("",!0),e.rule.show?(d(),m(f,{key:5,label:e.rule.title,type:"selects",modelValue:e.rule.value,"onUpdate:modelValue":a[6]||(a[6]=n=>e.rule.value=n),placeholder:u(o)("Please select field",{field:e.rule.title}),"input-attr":{onChange:l,content:i.validators,...(xe=(he=t.options)==null?void 0:he.rule)==null?void 0:xe.inputAttr},prop:"rule"},null,8,["label","modelValue","placeholder","input-attr"])):g("",!0),e.extend.show?(d(),m(f,{key:6,label:e.extend.title,type:"textarea",modelValue:e.extend.value,"onUpdate:modelValue":a[7]||(a[7]=n=>e.extend.value=n),"input-attr":{onChange:l,placeholder:u(o)("utils.One attribute per line without quotation marks(formitem)"),...(ke=(we=t.options)==null?void 0:we.extend)==null?void 0:ke.inputAttr},prop:"extend",onKeyup:a[8]||(a[8]=S(O(()=>{},["stop"]),["enter"]))},null,8,["label","modelValue","input-attr"])):g("",!0),e.inputExtend.show?(d(),m(f,{key:7,label:e.inputExtend.title,type:"textarea",modelValue:e.inputExtend.value,"onUpdate:modelValue":a[9]||(a[9]=n=>e.inputExtend.value=n),"input-attr":{onChange:l,placeholder:u(o)("utils.Extended properties of Input, one line without quotation marks, such as: size=large"),...(Te=(Ce=t.options)==null?void 0:Ce.inputExtend)==null?void 0:Te.inputAttr},prop:"inputExtend",onKeyup:a[10]||(a[10]=S(O(()=>{},["stop"]),["enter"]))},null,8,["label","modelValue","input-attr"])):g("",!0)])}}}),Be={class:"title"},Ge=Me({__name:"add",props:{modelValue:{type:Boolean,default:!1},configGroup:{default:()=>({})}},emits:["update:modelValue"],setup(c,{emit:y}){const o=Se(),t=c,x=y,e=()=>{x("update:modelValue",!1)},{t:i}=qe.useI18n(),w=_e(),l=q({inputTypes:{},labelWidth:180,submitLoading:!1,addConfig:{group:"",weigh:0,content:""},formItemData:{dict:`key1=value1
key2=value2`}}),z=q({group:[h({name:"required",trigger:"change",message:i("Please select field",{field:i("routine.config.Variable grouping")})})],name:[h({name:"required",title:i("routine.config.Variable name")}),h({name:"varName",message:i("Please enter the correct field",{field:i("routine.config.Variable name")})})],title:[h({name:"required",title:i("routine.config.Variable title")})],type:[h({name:"required",trigger:"change",message:i("Please select field",{field:i("routine.config.Variable type")})})],weigh:[h({name:"integer",title:i("routine.config.number")})]}),k=()=>{w.value&&w.value.validate(v=>{v&&(l.addConfig.content=l.formItemData.dict,delete l.formItemData.dict,Ne("add",{...l.addConfig,...l.formItemData}).then(()=>{x("update:modelValue",!1)}))})};return(v,s)=>{const E=P("el-form"),D=P("el-scrollbar"),C=P("el-button"),I=P("el-dialog"),U=R("drag"),A=R("zoom"),M=R("blur");return d(),m(I,{class:"ba-operate-dialog","close-on-click-modal":!1,"model-value":t.modelValue,onClose:e},{header:V(()=>[Ee((d(),Pe("div",Be,[W(j(u(i)("routine.config.Add configuration item")),1)])),[[U,[".ba-operate-dialog",".el-dialog__header"]],[A,".ba-operate-dialog"]])]),footer:V(()=>[De("div",{style:Ie("width: calc(100% - "+l.labelWidth/1.8+"px)")},[b(C,{onClick:e},{default:V(()=>[W(j(u(i)("Cancel")),1)]),_:1}),Ee((d(),m(C,{loading:l.submitLoading,onClick:s[4]||(s[4]=r=>k()),type:"primary"},{default:V(()=>[W(j(u(i)("Add")),1)]),_:1},8,["loading"])),[[M]])],4)]),default:V(()=>[b(D,{class:"ba-table-form-scrollbar"},{default:V(()=>[De("div",{class:"ba-operate-form ba-add-form",style:Ie(u(o).layout.shrink?"":"width: calc(100% - "+l.labelWidth/2+"px)")},[b(E,{ref_key:"formRef",ref:w,onKeyup:s[3]||(s[3]=S(r=>k(),["enter"])),rules:z,model:{...l.addConfig,...l.formItemData},"label-position":u(o).layout.shrink?"top":"right","label-width":160},{default:V(()=>[b(f,{label:u(i)("routine.config.Variable grouping"),type:"select",modelValue:l.addConfig.group,"onUpdate:modelValue":s[0]||(s[0]=r=>l.addConfig.group=r),prop:"group","input-attr":{content:v.configGroup}},null,8,["label","modelValue","input-attr"]),b(Ke,{modelValue:l.formItemData,"onUpdate:modelValue":s[1]||(s[1]=r=>l.formItemData=r)},null,8,["modelValue"]),b(f,{label:u(i)("Weigh"),type:"number",modelValue:l.addConfig.weigh,"onUpdate:modelValue":s[2]||(s[2]=r=>l.addConfig.weigh=r),modelModifiers:{number:!0},prop:"weigh"},null,8,["label","modelValue"])]),_:1},8,["rules","model","label-position"])],4)]),_:1})]),_:1},8,["model-value"])}}});export{Ge as _,$e as a,Le as d,Fe as i,Ne as p};
