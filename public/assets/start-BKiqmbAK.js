import{e as M,p as C,a as V,m,W as Q,o as u,h as S,k as s,T as l,s as e,l as c,O as n,U as i,N as b,V as _,Z as R,a6 as y,a5 as U,Y as j,H as Y}from"./vue-CwFJaX1P.js";import{c as k,s as d,i as z}from"./crud-QGX9UUhw.js";import{F as q}from"./index-CkJ5YQgv.js";import{b as H}from"./validate-BsCjhJOi.js";import{_ as O}from"./log.vue_vue_type_style_index_0_lang-_lCQMUZg.js";import{y as W,an as Z,ao as A,_ as G}from"./index-PFvgZIwd.js";import"./index-B3GXhXFg.js";import"./index-JTTiPgQY.js";const J={class:"default-main"},X={class:"crud-title"},ee={class:"start-opt"},te={class:"start-item-title"},ae={class:"start-item-remark"},se={class:"start-item suspension"},le={class:"start-item-title"},re={class:"start-item-remark"},oe={class:"start-item suspension"},de={class:"start-item-title"},ne={class:"start-item-remark"},ce={target:"_blank",href:"https://doc.buildadmin.com/guide/other/developerMustSee.html",rel:"noopener noreferrer"},ie={target:"_blank",href:"https://doc.buildadmin.com/guide/other/developerMustSee.html",rel:"noopener noreferrer"},ue={style:{width:"calc(100% * 0.9)"}},pe=M({__name:"start",setup(me){const{t}=W.useI18n(),L=C(),g=C(),r=V({dialog:{type:"",visible:!1},showLog:!1,loading:!1,successRecord:0}),$=p=>{r.dialog.type=p,r.dialog.visible=!0,r.successRecord=0,d.startData.table=""},I=V({table:[H({name:"required",message:t("crud.crud.Please select a data table")})]}),v=()=>{if(g.value){if(r.dialog.type=="sql"&&!d.startData.sql){Y({type:"error",message:t("crud.crud.Please enter the table creation SQL")});return}g.value.validate(p=>{p&&k(r.dialog.type)})}},N=()=>{r.successRecord=0,d.startData.table=""},T=()=>{d.startData.table&&(r.loading=!0,z(d.startData.table,d.startData.databaseConnection).then(p=>{r.successRecord=p.data.id}).finally(()=>{r.loading=!1}))},P=()=>{r.successRecord&&(d.startData.logId=r.successRecord.toString(),k("log"))},B=()=>!1;return(p,a)=>{const f=m("el-col"),D=m("el-row"),w=m("el-alert"),F=m("el-input"),E=m("el-form"),h=m("el-button"),K=m("el-dialog"),x=Q("blur");return u(),S("div",J,[s("div",X,l(e(t)("crud.crud.start")),1),s("div",ee,[c(D,{gutter:20},{default:n(()=>[c(f,{xs:24,span:8},{default:n(()=>[s("div",{onClick:a[0]||(a[0]=o=>e(k)("create")),class:"start-item suspension"},[s("div",te,l(e(t)("crud.crud.create")),1),s("div",ae,l(e(t)("crud.crud.New background CRUD from zero")),1)])]),_:1}),c(f,{onClick:a[1]||(a[1]=o=>$("db")),xs:24,span:8},{default:n(()=>[s("div",se,[s("div",le,l(e(t)("crud.crud.Select Data Table")),1),s("div",re,l(e(t)("crud.crud.Select a designed data table from the database")),1)])]),_:1}),c(f,{onClick:a[2]||(a[2]=o=>r.showLog=!0),xs:24,span:8},{default:n(()=>[s("div",oe,[s("div",de,l(e(t)("crud.crud.CRUD record")),1),s("div",ne,l(e(t)("crud.crud.Start with previously generated CRUD code")),1)])]),_:1})]),_:1}),c(D,{justify:"center"},{default:n(()=>[c(f,{span:20,class:"ba-markdown crud-tips suspension"},{default:n(()=>[s("b",null,l(e(t)("crud.crud.Fast experience")),1),s("ol",null,[s("li",null,[i(l(e(t)("crud.crud.experience 1 1"))+" ",1),s("a",ce,l(e(t)("crud.crud.experience 1 2")),1),i(" "+l(e(t)("crud.crud.experience 1 3")),1)]),s("li",null,[i(l(e(t)("crud.crud.experience 2 1"))+" ",1),s("code",null,l(e(t)("crud.crud.experience 2 2")),1),i(" "+l(e(t)("crud.crud.experience 2 3"))+" ",1),a[13]||(a[13]=s("code",null,"test_build",-1)),i(" "+l(e(t)("crud.crud.data sheet")),1)]),s("li",null,[i(l(e(t)("crud.crud.experience 3 1"))+" ",1),s("code",null,l(e(t)("crud.crud.experience 3 2")),1),i(" "+l(e(t)("crud.crud.experience 3 3"))+" ",1),s("code",null,l(e(t)("crud.crud.experience 3 4")),1)])]),B()?_("",!0):(u(),b(w,{key:0,class:"no-dev",type:"warning","show-icon":!0,closable:!1},{title:n(()=>[s("span",null,l(e(t)("crud.crud.experience 4 1")),1),s("a",ie,l(e(t)("crud.crud.experience 4 2")),1),s("span",null,[i(l(e(t)("crud.crud.experience 4 3")),1),s("code",null,l(e(t)("crud.crud.experience 4 4")),1)])]),_:1}))]),_:1})]),_:1}),c(K,{class:"ba-operate-dialog select-table-dialog",modelValue:r.dialog.visible,"onUpdate:modelValue":a[11]||(a[11]=o=>r.dialog.visible=o),title:r.dialog.type=="sql"?e(t)("crud.crud.Please enter SQL"):e(t)("crud.crud.Please select a data table"),"destroy-on-close":!0},{footer:n(()=>[s("div",ue,[c(h,{onClick:a[9]||(a[9]=o=>r.dialog.visible=!1)},{default:n(()=>[i(l(p.$t("Cancel")),1)]),_:1}),R((u(),b(h,{loading:r.loading,onClick:a[10]||(a[10]=o=>v()),type:"primary"},{default:n(()=>[i(l(e(t)("Confirm")),1)]),_:1},8,["loading"])),[[x]]),r.successRecord?R((u(),b(h,{key:0,onClick:P,type:"success"},{default:n(()=>[i(l(e(t)("crud.crud.Start with the historical record")),1)]),_:1})),[[x]]):_("",!0)])]),default:n(()=>[c(E,{"label-width":140,onKeyup:a[8]||(a[8]=y(o=>v(),["enter"])),class:"select-table-form",ref_key:"formRef",ref:g,model:e(d).startData,rules:I},{default:n(()=>[r.dialog.type=="sql"?(u(),b(F,{key:0,class:"sql-input",prop:"sql",ref_key:"sqlInputRef",ref:L,modelValue:e(d).startData.sql,"onUpdate:modelValue":a[3]||(a[3]=o=>e(d).startData.sql=o),type:"textarea",placeholder:e(t)("crud.crud.table create SQL"),rows:10,onKeyup:[a[4]||(a[4]=y(U(()=>{},["stop"]),["enter"])),a[5]||(a[5]=y(U(o=>v(),["ctrl"]),["enter"]))]},null,8,["modelValue","placeholder"])):r.dialog.type=="db"?(u(),S(j,{key:1},[c(q,{label:e(t)("Database connection"),modelValue:e(d).startData.databaseConnection,"onUpdate:modelValue":a[6]||(a[6]=o=>e(d).startData.databaseConnection=o),type:"remoteSelect","label-width":140,"block-help":e(t)("Database connection help"),"input-attr":{pk:"key",field:"key",remoteUrl:e(Z),onChange:N}},null,8,["label","modelValue","block-help","input-attr"]),(u(),b(q,{label:e(t)("crud.crud.data sheet"),modelValue:e(d).startData.table,"onUpdate:modelValue":a[7]||(a[7]=o=>e(d).startData.table=o),type:"remoteSelect",key:e(d).startData.databaseConnection,placeholder:e(t)("crud.crud.Please select a data table"),"label-width":140,"block-help":e(t)("crud.crud.data sheet help"),"input-attr":{pk:"table",field:"comment",params:{connection:e(d).startData.databaseConnection,samePrefix:1,excludeTable:["area","token","captcha","admin_group_access","config","admin_log","user_money_log","user_score_log"]},remoteUrl:e(A),onRow:T},prop:"table"},null,8,["label","modelValue","placeholder","block-help","input-attr"])),r.successRecord?(u(),b(w,{key:0,class:"success-record-alert",title:e(t)("crud.crud.The selected table has already generated records You are advised to start with historical records"),"show-icon":!0,closable:!1,type:"warning"},null,8,["title"])):_("",!0)],64)):_("",!0)]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"]),c(O,{modelValue:r.showLog,"onUpdate:modelValue":a[12]||(a[12]=o=>r.showLog=o)},null,8,["modelValue"])])])}}}),De=G(pe,[["__scopeId","data-v-05943a18"]]);export{De as default};
