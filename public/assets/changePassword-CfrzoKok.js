import{e as b,p as v,a as V,m as w,o as y,h as C,l as t,O as l,k as S,a6 as I,s as r,U as f,T as c}from"./vue-CwFJaX1P.js";import{y as N,b as $,F as L,ae as U,_ as k}from"./index-PFvgZIwd.js";import{b as u}from"./validate-BsCjhJOi.js";import{F as i}from"./index-CkJ5YQgv.js";import"./index-B3GXhXFg.js";import"./index-JTTiPgQY.js";const x={class:"user-views"},F={class:"change-password"},R=b({__name:"changePassword",setup(q){const{t:s}=N.useI18n(),P=$(),m=v(),e=V({formSubmitLoading:!1,form:{oldPassword:"",newPassword:"",confirmPassword:""},rules:{oldPassword:[u({name:"required",title:s("user.account.changePassword.Old password")})],newPassword:[u({name:"required",title:s("user.account.changePassword.New password")}),u({name:"password"})],confirmPassword:[u({name:"required",title:s("user.account.changePassword.Confirm new password")}),u({name:"password"}),{validator:(d,o,n)=>{(e.form.newPassword||e.form.confirmPassword)&&(e.form.newPassword==e.form.confirmPassword?n():n(new Error(s("user.account.changePassword.The duplicate password does not match the new password")))),n()},trigger:"blur"}]}}),p=()=>{m.value&&m.value.validate(d=>{d&&(e.formSubmitLoading=!0,U(e.form).then(o=>{e.formSubmitLoading=!1,o.code==1&&P.logout()}).catch(()=>{e.formSubmitLoading=!1}))})};return(d,o)=>{const n=w("el-button"),h=w("el-form-item"),g=w("el-form"),_=w("el-card");return y(),C("div",x,[t(_,{class:"user-views-card",shadow:"hover",header:r(s)("user.account.changePassword.Change Password")},{default:l(()=>[S("div",F,[t(g,{model:e.form,rules:e.rules,"label-position":"top",ref_key:"formRef",ref:m,onKeyup:o[5]||(o[5]=I(a=>p(),["enter"]))},{default:l(()=>[t(i,{label:r(s)("user.account.changePassword.Old password"),type:"password",modelValue:e.form.oldPassword,"onUpdate:modelValue":o[0]||(o[0]=a=>e.form.oldPassword=a),prop:"oldPassword","input-attr":{showPassword:!0},placeholder:r(s)("user.account.changePassword.Please enter your current password")},null,8,["label","modelValue","placeholder"]),t(i,{label:r(s)("user.account.changePassword.New password"),type:"password",modelValue:e.form.newPassword,"onUpdate:modelValue":o[1]||(o[1]=a=>e.form.newPassword=a),prop:"newPassword","input-attr":{showPassword:!0},placeholder:r(s)("Please input field",{field:r(s)("user.account.changePassword.New password")})},null,8,["label","modelValue","placeholder"]),t(i,{label:r(s)("user.account.changePassword.Confirm new password"),type:"password",modelValue:e.form.confirmPassword,"onUpdate:modelValue":o[2]||(o[2]=a=>e.form.confirmPassword=a),prop:"confirmPassword","input-attr":{showPassword:!0},placeholder:r(s)("Please input field",{field:r(s)("user.account.changePassword.Confirm new password")})},null,8,["label","modelValue","placeholder"]),t(h,{class:"submit-buttons"},{default:l(()=>[t(n,{onClick:o[3]||(o[3]=a=>r(L)(m.value))},{default:l(()=>[f(c(d.$t("Reset")),1)]),_:1}),t(n,{type:"primary",loading:e.formSubmitLoading,onClick:o[4]||(o[4]=a=>p())},{default:l(()=>[f(c(d.$t("Save")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model","rules"])])]),_:1},8,["header"])])}}}),j=k(R,[["__scopeId","data-v-d592f9a7"]]);export{j as default};
