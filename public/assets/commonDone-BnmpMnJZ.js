import{y as B,P as b,_ as C}from"./index-PFvgZIwd.js";import{m as d,b as N}from"./index-G6Ab-S99.js";import{s as l,j as w}from"./store-CvyK6unv.js";import{B as V}from"./index-B3GXhXFg.js";import{F as R}from"./index-CkJ5YQgv.js";import{u as H,t as M}from"./terminal-CSuUTq_6.js";import{e as U,a as j,m as h,W as D,o as n,h as a,k as s,s as e,T as o,Z as I,V as m,U as c,l as u,O as p,N as P,ae as W}from"./vue-CwFJaX1P.js";import"./index-JTTiPgQY.js";const F={class:"install-done"},O={class:"install-done-title"},z={key:0},Z={key:1},$={key:2},q={key:3},G={class:"install-tis-box"},J={key:0,class:"depend-box"},K={key:0,class:"depend-loading"},Q={class:"depend-tis"},X={key:0},Y={class:"color-red"},ee={key:0},te={key:1},oe={key:1,class:"color-green"},le={key:2,class:"exec-fail color-red"},se={key:1,class:"depend-tis"},ne={key:2},ae={key:0,class:"install-tis-box text-align-center"},de={class:"install-tis"},ie={class:"dependency-installation-fail-tips"},me={class:"install-tis-box"},ce={class:"install-tis"},re={class:"install-tis-box"},ue={class:"install-form"},pe={key:1,class:"install-tis-box"},_e={class:"install-form"},he={class:"el-popover__title"},fe={class:"reload-hot-server-content"},ve={class:"block-help hot-server-tips"},ye=U({__name:"commonDone",setup(Se){const{t}=B.useI18n(),_=H(),i=j({rebuild:0,reloadHotServer:0}),v=()=>{_.toggle(!0)},k=()=>{l.dialog.common=!1,i.rebuild==1?(_.toggle(!0),_.addTaskPM("web-build",!1,"",y=>{y==M.Success&&(_.toggle(!1),i.reloadHotServer==1&&l.common.moduleState!=d.DISABLE)})):i.reloadHotServer==1&&l.common.moduleState!=d.DISABLE},g=()=>{W.confirm(t("module.Is the command that failed on the WEB terminal executed manually or in other ways successfully?"),t("Reminder"),{confirmButtonText:t("module.yes"),cancelButtonText:t("Cancel"),type:"warning"}).then(()=>{l.loading.common=!0,w(l.common.uid).then(()=>{N(),l.loading.common=!1,l.common.dependInstallState="success"})})};return(y,r)=>{const x=h("el-link"),E=h("el-popover"),T=h("el-form-item"),A=h("el-button"),S=D("loading"),L=D("blur");return n(),a("div",F,[s("div",O,[e(l).common.moduleState==e(d).INSTALLED?(n(),a("span",z,o(e(t)("module.Congratulations, module installation is complete")),1)):e(l).common.moduleState==e(d).DISABLE?(n(),a("span",Z,o(e(t)("module.Module is disabled")),1)):e(l).common.moduleState==e(d).DEPENDENT_WAIT_INSTALL?(n(),a("span",$,o(e(t)("module.Congratulations, the code of the module is ready")),1)):(n(),a("span",q,o(e(t)("module.Unknown state")),1))]),s("div",G,[e(l).common.dependInstallState!="none"?(n(),a("div",J,[e(l).common.dependInstallState=="executing"?I((n(),a("div",K,null,512)),[[S,!0]]):m("",!0),s("div",Q,[e(l).common.dependInstallState=="executing"?(n(),a("div",X,[s("span",Y,o(e(t)("module.Do not refresh the page!")),1),e(l).common.moduleState==e(d).DISABLE?(n(),a("span",ee,o(e(t)("module.New adjustment of dependency detected")),1)):e(l).common.moduleState==e(d).DEPENDENT_WAIT_INSTALL?(n(),a("span",te,o(e(t)("module.This module adds new dependencies")),1)):m("",!0),r[2]||(r[2]=c("， ")),s("span",null,o(e(t)("module.The built-in terminal of the system is automatically installing these dependencies, please wait~")),1),s("span",{class:"span-a",onClick:v},o(e(t)("module.View progress")),1)])):m("",!0),e(l).common.dependInstallState=="success"?(n(),a("div",oe,o(e(t)("module.Dependency installation completed~")),1)):m("",!0),e(l).common.dependInstallState=="fail"?(n(),a("div",le,[c(o(e(t)("module.Dependency installation fail 1"))+" ",1),s("span",{class:"span-a",onClick:v},o(e(t)("module.Dependency installation fail 2")),1),c(" "+o(e(t)("module.Dependency installation fail 3"))+" ",1),u(x,{target:"_blank",type:"primary",href:"https://doc.buildadmin.com/guide/install/manualOperation.html"},{default:p(()=>[c(o(e(t)("module.Dependency installation fail 4")),1)]),_:1})])):m("",!0)])])):e(l).common.moduleState==e(d).INSTALLED?(n(),a("div",se,o(e(t)("module.This module does not add new dependencies")),1)):(n(),a("div",ne,o(e(t)("module.There is no adjustment for system dependency")),1))]),e(l).common.dependInstallState=="fail"?(n(),a("div",ae,[s("div",de,[c(o(e(t)("module.Dependency installation fail 5"))+" ",1),s("span",{class:"span-a",onClick:g},o(e(t)("module.Dependency installation fail 6")),1),c(" "+o(e(t)("module.Dependency installation fail 7"))+" ",1),s("span",ie,o(e(t)("module.dependency-installation-fail-tips")),1)])])):m("",!0),s("div",me,[s("div",ce,o(e(t)("module.please"))+o(e(l).common.moduleState==e(d).DISABLE?"":e(t)("module.After installation 1"))+o(e(t)("module.Manually clean up the system and browser cache")),1)]),s("div",re,[s("div",ue,[u(R,{label:(e(l).common.moduleState==e(d).DISABLE?"":e(t)("module.After installation 2"))+e(t)("module.Automatically execute reissue command?"),modelValue:i.rebuild,"onUpdate:modelValue":r[0]||(r[0]=f=>i.rebuild=f),type:"radio","input-attr":{border:!0,content:{0:e(t)("module.no"),1:e(t)("module.yes")}}},null,8,["label","modelValue","input-attr"])])]),e(b).dirtyFile&&e(l).common.moduleState!=e(d).DISABLE?(n(),a("div",pe,[s("div",_e,[u(T,{label:e(t)("module.After installation 2")+e(t)("module.Restart Vite hot server")},{default:p(()=>[u(V,{modelValue:i.reloadHotServer,"onUpdate:modelValue":r[1]||(r[1]=f=>i.reloadHotServer=f),type:"radio",attr:{class:"hot-server-input",border:!0,content:{0:e(t)("vite.Later")+e(t)("module.Manual restart"),1:e(t)("module.Restart Now")}}},null,8,["modelValue","attr"]),u(E,{width:360,placement:"top"},{reference:p(()=>[s("div",ve,o(e(t)("module.detailed information"))+"？",1)]),default:p(()=>[s("div",null,[s("div",he,o(e(t)("vite.Reload hot server title")),1),s("div",fe,[s("p",null,[s("span",null,o(e(t)("vite.Reload hot server tips 1")),1),s("span",null,"【"+o(e(t)(`vite.Close type ${e(b).closeType}`))+"】",1),s("span",null,o(e(t)("vite.Reload hot server tips 2")),1)]),s("p",null,o(e(t)("vite.Reload hot server tips 3")),1),s("p",null,o(e(t)("module.Restart Vite hot server tips")),1)])])]),_:1})]),_:1},8,["label"])])])):m("",!0),I((n(),P(A,{class:"install-done-button",disabled:!(e(l).common.dependInstallState!="executing"||e(l).common.moduleState==e(d).INSTALLED),size:"large",type:"primary",onClick:k},{default:p(()=>[c(o(e(l).common.moduleState==e(d).DISABLE?e(t)("Complete"):e(t)("module.End of installation")),1)]),_:1},8,["disabled"])),[[L],[S,e(l).loading.common]])])}}}),Ae=C(ye,[["__scopeId","data-v-c020a42e"]]);export{Ae as default};
