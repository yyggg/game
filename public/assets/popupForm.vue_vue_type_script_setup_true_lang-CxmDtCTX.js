import{e as W,p as j,aj as A,a as B,m as d,W as y,o as m,N as i,O as u,Z as g,h as L,U as _,T as b,s as e,k as c,j as x,l as r,_ as M,a6 as v,V as p,a5 as R}from"./vue-CwFJaX1P.js";import{e as $,y as K}from"./index-PFvgZIwd.js";import{F as f}from"./index-CkJ5YQgv.js";import{b as k}from"./validate-BsCjhJOi.js";const q={class:"title"},O={class:"block-help"},Z={class:"block-help"},Y=W({__name:"popupForm",setup(G){const w=$(),h=j(),t=A("baTable"),{t:l}=K.useI18n(),C=B({title:[k({name:"required",title:l("auth.rule.Rule title")})],name:[k({name:"required",title:l("auth.rule.Rule name")})],url:[k({name:"url",message:l("auth.rule.Please enter the correct URL")})],pid:[{validator:(I,o,n)=>o&&parseInt(o)==parseInt(t.form.items.id)?n(new Error(l("auth.rule.The superior menu rule cannot be the rule itself"))):n(),trigger:"blur"}]});return(I,o)=>{const n=d("el-input"),s=d("el-form-item"),V=d("el-option"),S=d("el-select"),E=d("el-form"),T=d("el-scrollbar"),U=d("el-button"),D=d("el-dialog"),N=y("drag"),P=y("zoom"),z=y("loading"),F=y("blur");return m(),i(D,{class:"ba-operate-dialog","close-on-click-modal":!1,"destroy-on-close":!0,"model-value":["Add","Edit"].includes(e(t).form.operate),onClose:e(t).toggleForm},{header:u(()=>[g((m(),L("div",q,[_(b(e(t).form.operate?e(l)(e(t).form.operate):""),1)])),[[N,[".ba-operate-dialog",".el-dialog__header"]],[P,".ba-operate-dialog"]])]),footer:u(()=>[c("div",{style:x("width: calc(100% - "+e(t).form.labelWidth/1.8+"px)")},[r(U,{onClick:o[17]||(o[17]=a=>e(t).toggleForm(""))},{default:u(()=>[_(b(e(l)("Cancel")),1)]),_:1}),g((m(),i(U,{loading:e(t).form.submitLoading,onClick:o[18]||(o[18]=a=>e(t).onSubmit(h.value)),type:"primary"},{default:u(()=>[_(b(e(t).form.operateIds&&e(t).form.operateIds.length>1?e(l)("Save and edit next item"):e(l)("Save")),1)]),_:1},8,["loading"])),[[F]])],4)]),default:u(()=>[g((m(),i(T,{class:"ba-table-form-scrollbar"},{default:u(()=>[c("div",{class:M(["ba-operate-form","ba-"+e(t).form.operate+"-form"]),style:x(e(w).layout.shrink?"":"width: calc(100% - "+e(t).form.labelWidth/2+"px)")},[e(t).form.loading?p("",!0):(m(),i(E,{key:0,ref_key:"formRef",ref:h,onKeyup:o[16]||(o[16]=v(a=>e(t).onSubmit(h.value),["enter"])),model:e(t).form.items,"label-position":e(w).layout.shrink?"top":"right","label-width":e(t).form.labelWidth+"px",rules:C},{default:u(()=>[r(f,{type:"remoteSelect",prop:"pid",label:e(l)("auth.rule.Superior menu rule"),modelValue:e(t).form.items.pid,"onUpdate:modelValue":o[0]||(o[0]=a=>e(t).form.items.pid=a),placeholder:e(l)("Click select"),"input-attr":{params:{isTree:!0},field:"title",remoteUrl:e(t).api.actionUrl.get("index")}},null,8,["label","modelValue","placeholder","input-attr"]),r(f,{label:e(l)("auth.rule.Rule type"),modelValue:e(t).form.items.type,"onUpdate:modelValue":o[1]||(o[1]=a=>e(t).form.items.type=a),type:"radio","input-attr":{border:!0,content:{menu_dir:e(l)("auth.rule.type menu_dir"),menu:e(l)("auth.rule.type menu"),button:e(l)("auth.rule.type button")}}},null,8,["label","modelValue","input-attr"]),r(s,{prop:"title",label:e(l)("auth.rule.Rule title")},{default:u(()=>[r(n,{modelValue:e(t).form.items.title,"onUpdate:modelValue":o[2]||(o[2]=a=>e(t).form.items.title=a),type:"string",placeholder:e(l)("Please input field",{field:e(l)("auth.rule.Rule title")})},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),r(s,{prop:"name",label:e(l)("auth.rule.Rule name")},{default:u(()=>[r(n,{modelValue:e(t).form.items.name,"onUpdate:modelValue":o[3]||(o[3]=a=>e(t).form.items.name=a),type:"string",placeholder:e(l)("auth.rule.English name, which does not need to start with `/admin`, such as auth/menu")},null,8,["modelValue","placeholder"]),c("div",O,b(e(l)("auth.rule.It will be registered as the web side routing name and used as the server side API authentication")),1)]),_:1},8,["label"]),e(t).form.items.type!="button"?(m(),i(s,{key:0,label:e(l)("auth.rule.Routing path")},{default:u(()=>[r(n,{modelValue:e(t).form.items.path,"onUpdate:modelValue":o[4]||(o[4]=a=>e(t).form.items.path=a),type:"string",placeholder:e(l)("auth.rule.The web side routing path (path) does not need to start with `/admin`, such as auth/menu")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])):p("",!0),e(t).form.operate&&e(t).form.items.type!="button"?(m(),i(f,{key:1,type:"icon",label:e(l)("auth.rule.Rule Icon"),modelValue:e(t).form.items.icon,"onUpdate:modelValue":o[5]||(o[5]=a=>e(t).form.items.icon=a),"input-attr":{showIconName:!0}},null,8,["label","modelValue"])):p("",!0),e(t).form.items.type=="menu"?(m(),i(f,{key:2,label:e(l)("auth.rule.Menu type"),modelValue:e(t).form.items.menu_type,"onUpdate:modelValue":o[6]||(o[6]=a=>e(t).form.items.menu_type=a),type:"radio","input-attr":{border:!0,content:{tab:e(l)("auth.rule.Menu type tab"),link:e(l)("auth.rule.Menu type link (offsite)"),iframe:"Iframe"}}},null,8,["label","modelValue","input-attr"])):p("",!0),e(t).form.items.menu_type!="tab"&&e(t).form.items.type!="button"?(m(),i(s,{key:3,prop:"url",label:e(l)("auth.rule.Link address")},{default:u(()=>[r(n,{modelValue:e(t).form.items.url,"onUpdate:modelValue":o[7]||(o[7]=a=>e(t).form.items.url=a),type:"string",placeholder:e(l)("auth.rule.Please enter the URL address of the link or iframe")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])):p("",!0),e(t).form.items.type=="menu"&&e(t).form.items.menu_type=="tab"?(m(),i(s,{key:4,label:e(l)("auth.rule.Component path")},{default:u(()=>[r(n,{modelValue:e(t).form.items.component,"onUpdate:modelValue":o[8]||(o[8]=a=>e(t).form.items.component=a),type:"string",placeholder:e(l)("auth.rule.Web side component path, please start with /src, such as: /src/views/backend/dashboard")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])):p("",!0),e(t).form.items.type=="menu"&&e(t).form.items.menu_type=="tab"?(m(),i(s,{key:5,label:e(l)("auth.rule.Extended properties")},{default:u(()=>[r(S,{class:"w100",modelValue:e(t).form.items.extend,"onUpdate:modelValue":o[9]||(o[9]=a=>e(t).form.items.extend=a),placeholder:e(l)("Please select field",{field:e(l)("auth.rule.Extended properties")})},{default:u(()=>[r(V,{label:e(l)("auth.rule.none"),value:"none"},null,8,["label"]),r(V,{label:e(l)("auth.rule.Add as route only"),value:"add_rules_only"},null,8,["label"]),r(V,{label:e(l)("auth.rule.Add as menu only"),value:"add_menu_only"},null,8,["label"])]),_:1},8,["modelValue","placeholder"]),c("div",Z,b(e(l)("auth.rule.extend Title")),1)]),_:1},8,["label"])):p("",!0),r(s,{label:e(l)("auth.rule.Rule comments")},{default:u(()=>[r(n,{onKeyup:[o[10]||(o[10]=v(R(()=>{},["stop"]),["enter"])),o[11]||(o[11]=v(R(a=>e(t).onSubmit(h.value),["ctrl"]),["enter"]))],modelValue:e(t).form.items.remark,"onUpdate:modelValue":o[12]||(o[12]=a=>e(t).form.items.remark=a),type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:e(l)("auth.rule.Use in controller `get_ route_ Remark()` function, which can obtain the value of this field for your own use, such as the banner file of the console")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),r(s,{label:e(l)("auth.rule.Rule weight")},{default:u(()=>[r(n,{modelValue:e(t).form.items.weigh,"onUpdate:modelValue":o[13]||(o[13]=a=>e(t).form.items.weigh=a),type:"number",placeholder:e(l)("auth.rule.Please enter the weight of menu rule (sort by)")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),r(f,{label:e(l)("auth.rule.cache"),modelValue:e(t).form.items.keepalive,"onUpdate:modelValue":o[14]||(o[14]=a=>e(t).form.items.keepalive=a),type:"radio","input-attr":{border:!0,content:{0:e(l)("Disable"),1:e(l)("Enable")}}},null,8,["label","modelValue","input-attr"]),r(f,{label:e(l)("State"),modelValue:e(t).form.items.status,"onUpdate:modelValue":o[15]||(o[15]=a=>e(t).form.items.status=a),type:"radio","input-attr":{border:!0,content:{0:e(l)("Disable"),1:e(l)("Enable")}}},null,8,["label","modelValue","input-attr"])]),_:1},8,["model","label-position","label-width","rules"]))],6)]),_:1})),[[z,e(t).form.loading]])]),_:1},8,["model-value","onClose"])}}});export{Y as _};
